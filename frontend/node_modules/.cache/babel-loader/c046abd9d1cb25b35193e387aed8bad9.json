{"ast":null,"code":"import _objectSpread from\"C:/Users/Drennan/Desktop/proyectos/ecommerce-league/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/Drennan/Desktop/proyectos/ecommerce-league/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Drennan/Desktop/proyectos/ecommerce-league/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"C:/Users/Drennan/Desktop/proyectos/ecommerce-league/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/Drennan/Desktop/proyectos/ecommerce-league/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{FaShoppingCart}from\"react-icons/fa\";import{motion}from\"framer-motion\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Items(_ref){var setItems=_ref.setItems,filteredItems=_ref.filteredItems;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),cart=_useState2[0],setCart=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),selected=_useState4[0],setSelected=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),totalPrice=_useState6[0],setTotalPrice=_useState6[1];var addCartHandler=function addCartHandler(id,price){if(!cart.includes(id)){setCart(function(prev){return[].concat(_toConsumableArray(prev),[id]);});setTotalPrice(function(prev){return prev+price;});}else{var res=cart.filter(function(i){return i!==id;});setTotalPrice(function(prev){return prev-price;});setCart(res);}};var onBuyHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"/api/items\",{method:\"POST\",body:JSON.stringify({itemsId:cart}),headers:{\"Content-type\":\"Application/json\"}});case 3:response=_context.sent;_context.next=6;return response.json();case 6:result=_context.sent;console.log(result);window.location.href=result;_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function onBuyHandler(){return _ref2.apply(this,arguments);};}();useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response,result;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"/api/items\");case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:result=_context2.sent;setItems(result);_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10]]);}))();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"ItemsContainer\",children:[/*#__PURE__*/_jsxs(motion.div,{className:\"Cart\",whileHover:{scale:1.2,color:\"#D6E865\"},children:[/*#__PURE__*/_jsx(FaShoppingCart,{onClick:onBuyHandler}),/*#__PURE__*/_jsxs(\"p\",{children:[\"$\",totalPrice]})]}),filteredItems.length>0?filteredItems.map(function(i){return/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0.5},whileInView:{opacity:selected[i.id]===1?1:0.5},whileHover:{opacity:1},onClick:function onClick(e){addCartHandler(i.id,i.price);console.log(selected);setSelected(function(prev){var res=_objectSpread({},prev);res[i.id]===1?res[i.id]=0:res[i.id]=1;return res;});},children:[/*#__PURE__*/_jsx(\"img\",{src:\"http://ddragon.leagueoflegends.com/cdn/img/champion/loading/\".concat(i.id,\"_0.jpg\"),width:200,height:363,alt:\"ChampImage\"}),/*#__PURE__*/_jsxs(motion.p,{whileInView:{color:selected[i.id]===1?\"#D6E865\":\"#d0d0d0\"},children:[\"$\",i.price]})]},i.id);}):/*#__PURE__*/_jsx(\"h1\",{className:\"error\",children:\"No hay items que cumplan las condiciones.\"})]});}","map":{"version":3,"names":["useEffect","useState","FaShoppingCart","motion","Items","setItems","filteredItems","cart","setCart","selected","setSelected","totalPrice","setTotalPrice","addCartHandler","id","price","includes","prev","res","filter","i","onBuyHandler","fetch","method","body","JSON","stringify","itemsId","headers","response","json","result","console","log","window","location","href","scale","color","length","map","opacity","e"],"sources":["C:/Users/Drennan/Desktop/proyectos/ecommerce-league/frontend/src/components/Items.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { FaShoppingCart } from \"react-icons/fa\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nexport default function Items({ setItems, filteredItems }) {\r\n  const [cart, setCart] = useState([]);\r\n  const [selected, setSelected] = useState({});\r\n  const [totalPrice, setTotalPrice] = useState(0);\r\n\r\n  const addCartHandler = (id, price) => {\r\n    if (!cart.includes(id)) {\r\n      setCart((prev) => [...prev, id]);\r\n      setTotalPrice((prev) => prev + price);\r\n    } else {\r\n      const res = cart.filter((i) => i !== id);\r\n      setTotalPrice((prev) => prev - price);\r\n      setCart(res);\r\n    }\r\n  };\r\n\r\n  const onBuyHandler = async () => {\r\n    try {\r\n      const response = await fetch(\"/api/items\", {\r\n        method: \"POST\",\r\n        body: JSON.stringify({\r\n          itemsId: cart,\r\n        }),\r\n        headers: {\r\n          \"Content-type\": \"Application/json\",\r\n        },\r\n      });\r\n\r\n      const result = await response.json();\r\n\r\n      console.log(result)\r\n\r\n      window.location.href = result;\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try{\r\n        const response = await fetch(\"/api/items\");\r\n        const result = await response.json();\r\n        setItems(result);\r\n      }catch(e){\r\n        console.log(e);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"ItemsContainer\">\r\n      <motion.div\r\n        className=\"Cart\"\r\n        whileHover={{ scale: 1.2, color: \"#D6E865\" }}\r\n      >\r\n        <FaShoppingCart onClick={onBuyHandler} />\r\n        <p>${totalPrice}</p>\r\n      </motion.div>\r\n      {filteredItems.length > 0 ? (\r\n        filteredItems.map((i) => {\r\n          return (\r\n            <motion.div\r\n              initial={{ opacity: 0.5}}\r\n              whileInView={{opacity: selected[i.id] === 1 ? 1 : 0.5}}\r\n              whileHover={{\r\n                opacity: 1,\r\n              }}\r\n              key={i.id}\r\n              onClick={(e) => {\r\n                addCartHandler(i.id, i.price);\r\n                console.log(selected);\r\n                setSelected(prev => {\r\n                  const res = {...prev};\r\n                  res[i.id] === 1 ? res[i.id] = 0 : res[i.id] = 1;\r\n                  return res;\r\n                })\r\n              }}\r\n            >\r\n              <img\r\n                src={`http://ddragon.leagueoflegends.com/cdn/img/champion/loading/${i.id}_0.jpg`}\r\n                width={200}\r\n                height={363}\r\n                alt=\"ChampImage\"\r\n              ></img>\r\n              <motion.p \r\n                whileInView={{color: selected[i.id] === 1 ? \"#D6E865\" : \"#d0d0d0\"}}\r\n              >${i.price}</motion.p>\r\n            </motion.div>\r\n          );\r\n        })\r\n      ) : (\r\n        <h1 className=\"error\">No hay items que cumplan las condiciones.</h1>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}